{% extends "index.html" %}
{% load comments %}

{% block content %}

    <div class="post">
        <h2 class="title"><a href="/blog/{{post.id}}">{{ post.title }} </a></h2>
        <p class="meta">
            Posted by <a href="#">{{ post.owner.login }}</a> on {{ post.created|date:"F j, Y" }} &nbsp;&bull;&nbsp;
            {% get_comment_count for post as comment_count %}
            <a href="#post-comments" class="comments">Comments ({{ comment_count }})</a>
        </p>

        <div class="entry">
            <p>
            <img src="{{ STATIC_URL }}images/{{ post.image_uri }}" />
            {{ post.body|safe|linebreaks }}
        </div>

        <div class="tags">
            <p>Tags: &nbsp;
            {% for tag in post.tags.all %}
                <a href="/tag/{{tag}}">{{tag}}</a>
                {% if not forloop.last %}, {%endif %}
            {% endfor %}
            </p>
        </div>

        <div class="comments" id="post-comments">
            <h3>Comments</h3>
            {% get_comment_list for post as comment_list %}
            {% for comment in comment_list %}
                <div class="comment">
                    <p class="meta">Posted by: {{ comment.user_name }} on {{ comment.submit_date }}</p>
                    {{ comment.comment }}
                </div>
            {% endfor %}
        </div>

        <div class="commentform">
            <h3>Add comment</h3>
            {% render_comment_form for post %}
        </div>
    </div>
    <div style="clear: both;">&nbsp;</div>

{% endblock %}
